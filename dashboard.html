<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TechTonic Dashboard</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body onload="updateDashboard()">
  <nav>
    <ul class="nav-buttons">
      <li><a href="lessons.html">📘 Lessons</a></li>
      <li><a href="profile.html">👤 Profile</a></li>
      <li><a href="sandbox.html">🛠️ Sandbox</a></li>
      <li><a href="logout.html">🚪 Logout</a></li>
    </ul>
  </nav>

  <div class="dashboard-container">
    <h1>👋 Welcome back, Coder!</h1>
    <div class="avatar bounce"></div>

    <div class="card-container">
      <div class="card">
        <h2>📈 Progress</h2>
        <p><span id="lesson-progress">0</span>/25 Lessons Completed</p>
        <div class="progress-bar"><div id="progress-fill"></div></div>
      </div>

      <div class="card">
        <h2>🔥 Streak</h2>
        <p>Daily Streak: <span id="daily-streak">0</span> days</p>
      </div>

      <div class="card">
        <h2>⭐ XP</h2>
        <p>XP: <span id="xp">0</span></p>
      </div>

      <div class="card">
        <h2>🏅 Badges</h2>
        <ul id="badge-list"></ul>
      </div>

      <div class="card">
        <h2>🎯 Challenges Completed</h2>
        <p><span id="challenges-done">0</span> done</p>
      </div>
    </div>

    <button onclick="continueLesson()" class="continue-btn">🚀 Continue Lesson</button>
  </div>

  <script>
    function updateDashboard() {
      const progress = +localStorage.getItem("lessonsCompleted") || 0;
      const streak = +localStorage.getItem("dailyStreak") || 0;
      const xp = +localStorage.getItem("xp") || 0;
      const badges = JSON.parse(localStorage.getItem("badges") || "[]");
      const challenges = +localStorage.getItem("challengesCompleted") || 0;

      document.getElementById("lesson-progress").textContent = progress;
      document.getElementById("daily-streak").textContent = streak;
      document.getElementById("xp").textContent = xp;
      document.getElementById("challenges-done").textContent = challenges;

      const fill = document.getElementById("progress-fill");
      fill.style.width = `${(progress / 25) * 100}%`;

      const badgeList = document.getElementById("badge-list");
      badgeList.innerHTML = badges.map(b => `<li>${b}</li>`).join("");

      // Streak logic
      const lastVisit = localStorage.getItem("lastVisit");
      const today = new Date().toDateString();
      if (lastVisit !== today) {
        const newStreak = streak + 1;
        localStorage.setItem("dailyStreak", newStreak);
        localStorage.setItem("lastVisit", today);
        document.getElementById("daily-streak").textContent = newStreak;
      }
    }

    function continueLesson() {
      const lastLesson = localStorage.getItem("lastLesson");
      if (lastLesson) {
        window.location.href = lastLesson;
      } else {
        alert("Start a lesson first!");
      }
    }
  </script>
</body>
</html>
